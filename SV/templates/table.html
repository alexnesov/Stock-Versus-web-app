{%extends "base.html"%}
{%block content%}

<head>
  <link href="/static/style_table.css" rel="stylesheet" type="text/css">
  <title>GTS-Table</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>

</head>

<body id="Table_page">


  <h3>Signals</h3>
  <div class="test" id="test">
    <script>
      var graphs = {{test | safe}};
      Plotly.plot('test',graphs,{});
    </script>
  </div>
  
</code>
<hr>

<div class="chart" id="line">
  <script>
    var graphs = {{plot | safe}};
    Plotly.plot('line',graphs,{});
  </script> 

</div>
  </p>

    <form class="form" autocomplete="off" spellcheck="false" method="POST">

      </div>
          <div class="row">
            <label for="date_input" class="col-form-label col-form-label-sm">Signals untill: </label>
            
            <div class="col-sm-2">
              {{ form.date_input(class="form-control form-control-sm", type="date", value=strToday | safe)}}
            </div>

            
              <div class="btn-toolbar">
                <input type="submit" class="btn btn-secondary btn-sm mr-2 mb-2" id="validate_date" value="Filter">
                <input type="submit" class="btn btn-secondary btn-sm mr-2 mb-2" id="reset" value="Reset">
                <a href="/getCSV" input class="btn btn-success btn-sm mr-2 mb-2" id="getcsv">Download</a>
            </div>
      </div>

    </form>
  <div>
    <p style="text-align:center">

      {%if average>0%}
      <img alt="dl icon" src="../static/green-arrow.png" width="30" height="30" >
    </br>

      Average overall return: <font color="green"><b>{{average}}</b></font> % 
      {%elif average==0%}
      Average overall return: 0 %
      {%else%}
      Average overall return: <font color="red"><b>{{average}}</b></font> %
      <img alt="dl icon" src="../static/red-arrow.png" width="30" height="30" >
      {% endif %}
    </br>

      {%if SP500evol>0%}
      <b>SP 500</b> evol. over the same period : 
      <font color="green"><b>{{SP500evol}}</b></font> % 
      {%else%}
      <b>SP 500</b> evol. over the same period : 
      <font color="red"><b>{{SP500evol}}</b></font> % 
      {% endif %}
    </br>

    (<strong>{{lastD}}</strong> to <strong>{{firstD}}</strong>)

    </p>

  </div>




</div>

  

<div class="table-wrapper-scroll-y my-custom-scrollbar" >

<table class="table table-bordered table-striped table-sm table-hover">
  <thead class="thead-dark">
    <th scope="col">ValidTick</th>
    <th scope="col">SignalDate</th>
    <th scope="col">ScanDate</th>
    <th scope="col">NScanDaysInterval</th>
    <th scope="col">PriceAtSignal</th>
    <th scope="col">Last closing price</th>
    <th scope="col">Price Evolution</th>
  </thead>
  {% for item in items %}
  <tr>
    <td>{{ item[0] }}</td>
    <td>{{ item[1] }}</td>
    <td>{{ item[2] }}</td>
    <td>{{ item[3] }}</td>
    <td>{{ item[4] }}</td>
    <td>{{ item[5] }}</td>
    <td>{{ item[6] }}</td>
  </tr>
  {% endfor %}
</table>


</body>
{% include "base_dashboard.html" %}

{%endblock%}

